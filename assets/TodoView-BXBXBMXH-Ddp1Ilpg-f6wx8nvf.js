import{M as C,p as g,m as o,q as d,G as A,I as s,N as f,o as B,h as D,z as H,C as N,a as S,Q as W,H as $,b as j,Y as z,E as q,c as T,d as b,n as y}from"./index-BA8Z2Jqc.js";const x="https://easydev.club/api/v1",O=async()=>{try{const t=await fetch(`${x}/todos`),e=await t.json();if(!t.ok)throw new Error("Ошибка при загрузки всех задач");return e}catch(t){console.error(t)}},Q=async t=>{try{const e=await fetch(`${x}/todos?filter=${t}`),a=await e.json();if(!e.ok)throw new Error("Ошибка при загрузки всех задач");return a}catch(e){console.error(e)}},U=async t=>{try{if(!(await fetch(`${x}/todos`,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({isDone:!1,title:t})})).ok)throw new Error("Ошибка при создании задачи")}catch(e){console.error(e)}},M=async(t,e,a)=>{try{const l=await fetch(`${x}/todos/${t}`,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({isDone:e,title:a})});if(!l.ok)throw new Error("Ошибка при удалении");return await l.json()}catch(l){console.error(l)}},Y=async t=>{try{if(!(await fetch(`${x}/todos/${t}`,{method:"DELETE",headers:{"Content-type":"application/json"}})).ok)throw new Error("Ошибка при удалении")}catch(e){console.error(e)}},Z={},F={class:"med-btn"};function G(t,e){return o(),d("button",F,[A(t.$slots,"default",{},()=>[e[0]||(e[0]=W("Do"))])])}const I=C(Z,[["render",G]]),J={class:"create-task-form"},P=g({__name:"CreateTaskForm",emits:["createNewTodo"],setup(t,{emit:e}){const a=f(""),l=e,i=async()=>{a.value&&(await l("createNewTodo",a.value),a.value="")};return(c,r)=>(o(),d("div",J,[$(s("input",{"onUpdate:modelValue":r[0]||(r[0]=u=>a.value=u),class:"create-task-form__input",type:"text",placeholder:"Task To Be Done..."},null,512),[[j,a.value]]),D(I,{onClick:i},{default:z(()=>r[1]||(r[1]=[W(" Add ")])),_:1})]))}}),R={class:"nav"},K=g({__name:"Nav",props:{all:{},completed:{},inWork:{}},emits:["filterChanged"],setup(t,{emit:e}){const a=e,l=t,i=f("all"),c=q(()=>({all:i.value==="all"?"nav__el nav__el_active":"nav__el",inWork:i.value==="inWork"?"nav__el nav__el_active":"nav__el",completed:i.value==="completed"?"nav__el nav__el_active":"nav__el"})),r=u=>{u!==i.value&&(i.value=u,a("filterChanged",u))};return(u,v)=>(o(),d("nav",R,[s("div",{class:b(c.value.all),onClick:v[0]||(v[0]=m=>r("all"))}," Все ("+T(l.all?l.all:"-")+") ",3),s("div",{class:b(c.value.inWork),onClick:v[1]||(v[1]=m=>r("inWork"))}," В работе ("+T(l.inWork?l.inWork:"-")+") ",3),s("div",{class:b(c.value.completed),onClick:v[2]||(v[2]=m=>r("completed"))}," Сделано ("+T(l.completed?l.completed:"-")+") ",3)]))}}),X={class:"checkbox-box"},ee=["checked"],ae=g({__name:"Checkbox",props:{modelValue:{type:Boolean}},setup(t){return(e,a)=>(o(),d("div",X,[s("input",{type:"checkbox",checked:e.modelValue},null,8,ee)]))}}),te={},le={class:"chng-btn"};function oe(t,e){return o(),d("button",le,e[0]||(e[0]=[s("svg",{fill:"#ffffff",width:"14px",height:"14px",viewBox:"-0.5 -0.5 24 24",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMinYMin",class:"jam jam-write-f"},[s("path",{d:"M21.289.98l.59.59c.813.814.69 2.257-.277 3.223L9.435 16.96l-3.942 1.442c-.495.182-.977-.054-1.075-.525a.928.928 0 0 1 .045-.51l1.47-3.976L18.066 1.257c.967-.966 2.41-1.09 3.223-.276zM8.904 2.19a1 1 0 1 1 0 2h-4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-4a1 1 0 0 1 2 0v4a4 4 0 0 1-4 4h-12a4 4 0 0 1-4-4v-12a4 4 0 0 1 4-4h4z"})],-1)]))}const ne=C(te,[["render",oe]]),se={},ie={class:"del-btn"};function ce(t,e){return o(),d("button",ie,e[0]||(e[0]=[s("svg",{fill:"#ffffff",width:"14px",height:"14px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M5.755,20.283,4,8H20L18.245,20.283A2,2,0,0,1,16.265,22H7.735A2,2,0,0,1,5.755,20.283ZM21,4H16V3a1,1,0,0,0-1-1H9A1,1,0,0,0,8,3V4H3A1,1,0,0,0,3,6H21a1,1,0,0,0,0-2Z"})],-1)]))}const re=C(se,[["render",ce]]),de={},ue={class:"reset-btn"};function ve(t,e){return o(),d("button",ue,e[0]||(e[0]=[s("svg",{width:"14px",height:"14px",viewBox:"0 0 15 15",fill:"#fff",xmlns:"http://www.w3.org/2000/svg"},[s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.85355 2.14645C5.04882 2.34171 5.04882 2.65829 4.85355 2.85355L3.70711 4H9C11.4853 4 13.5 6.01472 13.5 8.5C13.5 10.9853 11.4853 13 9 13H5C4.72386 13 4.5 12.7761 4.5 12.5C4.5 12.2239 4.72386 12 5 12H9C10.933 12 12.5 10.433 12.5 8.5C12.5 6.567 10.933 5 9 5H3.70711L4.85355 6.14645C5.04882 6.34171 5.04882 6.65829 4.85355 6.85355C4.65829 7.04882 4.34171 7.04882 4.14645 6.85355L2.14645 4.85355C1.95118 4.65829 1.95118 4.34171 2.14645 4.14645L4.14645 2.14645C4.34171 1.95118 4.65829 1.95118 4.85355 2.14645Z",fill:"#fff"})],-1)]))}const pe=C(de,[["render",ve]]),he={},fe={class:"accept-btn"};function we(t,e){return o(),d("button",fe,e[0]||(e[0]=[s("svg",{fill:"#ffffff",width:"14px",height:"14px",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},[s("defs"),s("g",{id:"check"},[s("path",{class:"cls-1",d:"M12.16,28a3,3,0,0,1-2.35-1.13L3.22,18.62a1,1,0,0,1,1.56-1.24l6.59,8.24A1,1,0,0,0,13,25.56L27.17,4.44a1,1,0,1,1,1.66,1.12L14.67,26.67A3,3,0,0,1,12.29,28Z"})])],-1)]))}const ke=C(he,[["render",we]]),me={class:"task-card__status-box"},_e={key:1,class:"task-card__content"},ye={class:"task-card__btn-box"},Ce=g({__name:"TaskCard",props:{id:{},title:{},created:{},isDone:{type:Boolean}},emits:["deleteTodo","changeTodoStatus","changeTodoTitle"],setup(t,{emit:e}){const a=t,l=e,i=f(a.isDone),c=f(!1),r=f(a.title),u=()=>{l("changeTodoStatus",a.id,!a.isDone)},v=()=>{l("deleteTodo",a.id)},m=()=>{l("changeTodoTitle",a.id,a.isDone,r.value),c.value=!1},n=()=>{c.value=!1,r.value=a.title},h=w=>w?"task-card complete-task":"task-card";return(w,p)=>(o(),d("div",{class:b(h(a.isDone))},[s("div",me,[D(ae,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=k=>i.value=k),onChange:u},null,8,["modelValue"]),c.value?$((o(),d("input",{key:0,"onUpdate:modelValue":p[1]||(p[1]=k=>r.value=k),class:"task-card__input task-card__content",type:"text"},null,512)),[[j,r.value]]):(o(),d("p",_e,T(a.title),1))]),s("div",ye,[c.value?(o(),y(ke,{key:0,onClick:m})):c.value?H("",!0):(o(),y(ne,{key:1,onClick:p[2]||(p[2]=k=>c.value=!0)})),c.value?c.value?(o(),y(pe,{key:3,onClick:n})):H("",!0):(o(),y(re,{key:2,onClick:v}))])],2))}}),ge={class:"tasks-list"},xe={key:0,class:"tasks-list__loading"},Te={key:1,class:"tasks-list"},De=g({__name:"TodoView",setup(t){const e=f(!1),a=f(null),l=f("all");B(async()=>{const n=await O();e.value=!0,a.value=n});const i=async n=>{const h=await Q(n);a.value=h},c=async n=>{a.value=null,l.value=n,await i(n)},r=async n=>{await Y(n),await i(l.value)},u=async(n,h)=>{await M(n,h),await i(l.value)},v=async(n,h,w)=>{await M(n,h,w),await i(l.value)},m=async n=>{await U(n),await i(l.value)};return(n,h)=>{var w,p,k,L,V,E;return o(),d("div",ge,[D(P,{onCreateNewTodo:m}),D(K,{all:((p=(w=a.value)==null?void 0:w.info)==null?void 0:p.all)||0,completed:((L=(k=a.value)==null?void 0:k.info)==null?void 0:L.completed)||0,inWork:((E=(V=a.value)==null?void 0:V.info)==null?void 0:E.inWork)||0,onFilterChanged:c},null,8,["all","completed","inWork"]),e.value===null?(o(),d("div",xe," Loading... ")):H("",!0),a.value?(o(),d("div",Te,[(o(!0),d(N,null,S(a.value.data,_=>(o(),y(Ce,{key:_.id,id:_.id,title:_.title,created:_.created,isDone:_.isDone,onDeleteTodo:r,onChangeTodoStatus:u,onChangeTodoTitle:v},null,8,["id","title","created","isDone"]))),128))])):H("",!0)])}}});export{De as default};
