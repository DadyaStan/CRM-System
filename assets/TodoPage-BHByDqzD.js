import{_ as B,o as i,a as p,g as V,h as b,d as k,r as f,i as N,v as A,e as d,c as E,w as g,t as T,n as $,f as C,j as L,k as M,F as H,l as S}from"./index-BiMnbbn5.js";const y="https://easydev.club/api/v1",j=async()=>{try{const o=await fetch(`${y}/todos`),e=await o.json();if(!o.ok)throw new Error("Ошибка при загрузки задач "+Error);return e}catch(o){throw console.error(o),new Error("Ошибка при загрузки задач "+Error)}},F=async o=>{try{const e=await fetch(`${y}/todos?filter=${o}`),t=await e.json();if(!e.ok)throw new Error("Ошибка при загрузки профиля "+Error);return t}catch(e){throw console.error(e),new Error("Ошибка при загрузки профиля "+Error)}},U=async o=>{try{if(!(await fetch(`${y}/todos`,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({isDone:!1,title:o})})).ok)throw new Error("Ошибка при создании задачи "+Error)}catch(e){throw console.error(e),new Error("Ошибка при создании задачи "+Error)}},W=async(o,e)=>{try{const t=await fetch(`${y}/todos/${o}`,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Ошибка при изменении задачи "+Error);return await t.json()}catch(t){throw console.error(t),new Error("Ошибка при изменении задачи "+Error)}},R=async o=>{try{if(!(await fetch(`${y}/todos/${o}`,{method:"DELETE",headers:{"Content-type":"application/json"}})).ok)throw new Error("Ошибка при удалении "+Error)}catch(e){throw console.error(e),new Error("Ошибка при удалении "+Error)}},Z={},z={class:"med-btn"};function I(o,e){return i(),p("button",z,[V(o.$slots,"default",{},()=>[e[0]||(e[0]=b("Do"))])])}const O=B(Z,[["render",I]]),P={class:"create-task-form"},J=k({__name:"CreateTaskForm",emits:["createNewTodo"],setup(o,{emit:e}){const t=f(""),a=e,c=async()=>{t.value&&(await a("createNewTodo",t.value),t.value="")};return(s,l)=>(i(),p("div",P,[N(d("input",{"onUpdate:modelValue":l[0]||(l[0]=u=>t.value=u),class:"create-task-form__input",type:"text",placeholder:"Task To Be Done..."},null,512),[[A,t.value]]),E(O,{onClick:c},{default:g(()=>l[1]||(l[1]=[b(" Add ")])),_:1})]))}}),Y={class:"nav"},q=k({__name:"Nav",props:{todoCount:{}},emits:["filterChanged"],setup(o,{emit:e}){const t=e,a=o,c=f("all"),s=l=>{l!==c.value&&(c.value=l,t("filterChanged",l))};return(l,u)=>(i(),p("nav",Y,[d("div",{class:$({nav__el:!0,nav__el_active:c.value==="all"}),onClick:u[0]||(u[0]=h=>s("all"))}," Все ("+T(a.todoCount.all?a.todoCount.all:"-")+") ",3),d("div",{class:$({nav__el:!0,nav__el_active:c.value==="inWork"}),onClick:u[1]||(u[1]=h=>s("inWork"))}," В работе ("+T(a.todoCount.inWork?a.todoCount.inWork:"-")+") ",3),d("div",{class:$({nav__el:!0,nav__el_active:c.value==="completed"}),onClick:u[2]||(u[2]=h=>s("completed"))}," Сделано ("+T(a.todoCount.completed?a.todoCount.completed:"-")+") ",3)]))}}),G="data:image/svg+xml,%3csvg%20fill='%23ffffff'%20width='14px'%20height='14px'%20viewBox='0%200%2032%2032'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3c/defs%3e%3cg%20id='check'%3e%3cpath%20class='cls-1'%20d='M12.16,28a3,3,0,0,1-2.35-1.13L3.22,18.62a1,1,0,0,1,1.56-1.24l6.59,8.24A1,1,0,0,0,13,25.56L27.17,4.44a1,1,0,1,1,1.66,1.12L14.67,26.67A3,3,0,0,1,12.29,28Z'%20/%3e%3c/g%3e%3c/svg%3e",K="data:image/svg+xml,%3csvg%20fill='%23ffffff'%20width='14px'%20height='14px'%20viewBox='-0.5%20-0.5%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%20preserveAspectRatio='xMinYMin'%20class='jam%20jam-write-f'%3e%3cpath%20d='M21.289.98l.59.59c.813.814.69%202.257-.277%203.223L9.435%2016.96l-3.942%201.442c-.495.182-.977-.054-1.075-.525a.928.928%200%200%201%20.045-.51l1.47-3.976L18.066%201.257c.967-.966%202.41-1.09%203.223-.276zM8.904%202.19a1%201%200%201%201%200%202h-4a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2v-4a1%201%200%200%201%202%200v4a4%204%200%200%201-4%204h-12a4%204%200%200%201-4-4v-12a4%204%200%200%201%204-4h4z'%20/%3e%3c/svg%3e",Q="data:image/svg+xml,%3csvg%20fill='%23ffffff'%20width='14px'%20height='14px'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.755,20.283,4,8H20L18.245,20.283A2,2,0,0,1,16.265,22H7.735A2,2,0,0,1,5.755,20.283ZM21,4H16V3a1,1,0,0,0-1-1H9A1,1,0,0,0,8,3V4H3A1,1,0,0,0,3,6H21a1,1,0,0,0,0-2Z'%20/%3e%3c/svg%3e",X="data:image/svg+xml,%3csvg%20width='14px'%20height='14px'%20viewBox='0%200%2015%2015'%20fill='%23fff'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4.85355%202.14645C5.04882%202.34171%205.04882%202.65829%204.85355%202.85355L3.70711%204H9C11.4853%204%2013.5%206.01472%2013.5%208.5C13.5%2010.9853%2011.4853%2013%209%2013H5C4.72386%2013%204.5%2012.7761%204.5%2012.5C4.5%2012.2239%204.72386%2012%205%2012H9C10.933%2012%2012.5%2010.433%2012.5%208.5C12.5%206.567%2010.933%205%209%205H3.70711L4.85355%206.14645C5.04882%206.34171%205.04882%206.65829%204.85355%206.85355C4.65829%207.04882%204.34171%207.04882%204.14645%206.85355L2.14645%204.85355C1.95118%204.65829%201.95118%204.34171%202.14645%204.14645L4.14645%202.14645C4.34171%201.95118%204.65829%201.95118%204.85355%202.14645Z'%20fill='%23fff'%20/%3e%3c/svg%3e",ee={class:"checkbox-box"},te=["checked"],oe=k({__name:"Checkbox",props:{modelValue:{type:Boolean}},setup(o){const e=o;return(t,a)=>(i(),p("div",ee,[d("input",{type:"checkbox",checked:e.modelValue},null,8,te)]))}}),ae={},ne={class:"icon-btn"};function se(o,e){return i(),p("button",ne,[V(o.$slots,"default",{},()=>[e[0]||(e[0]=b(" UI "))])])}const x=B(ae,[["render",se]]),re={class:"task-card__status-box"},le={key:1,class:"task-card__content"},ce={class:"task-card__btn-box"},ie=k({__name:"TaskCard",props:{id:{},title:{},created:{},isDone:{type:Boolean}},emits:["deleteTodo","changeTodoStatus","changeTodoTitle"],setup(o,{emit:e}){const t=o,a=e,c=f(t.isDone),s=f(!1),l=f(t.title),u=()=>{a("changeTodoStatus",t.id,{isDone:!t.isDone})},h=()=>{a("deleteTodo",t.id)},D=()=>{a("changeTodoTitle",t.id,{title:l.value}),s.value=!1},n=()=>{s.value=!1,l.value=t.title},v=w=>w?"task-card complete-task":"task-card";return(w,r)=>(i(),p("div",{class:$(v(t.isDone))},[d("div",re,[E(oe,{modelValue:c.value,"onUpdate:modelValue":r[0]||(r[0]=_=>c.value=_),onChange:u},null,8,["modelValue"]),s.value?N((i(),p("input",{key:0,"onUpdate:modelValue":r[1]||(r[1]=_=>l.value=_),class:"task-card__input task-card__content",type:"text"},null,512)),[[A,l.value]]):(i(),p("p",le,T(t.title),1))]),d("div",ce,[s.value?(i(),C(x,{key:0,onClick:D,style:{"background-color":"#3ae43a"}},{default:g(()=>r[3]||(r[3]=[d("img",{src:G,alt:"Accept"},null,-1)])),_:1})):s.value?L("",!0):(i(),C(x,{key:1,onClick:r[2]||(r[2]=_=>s.value=!0),style:{"background-color":"#5391FC"}},{default:g(()=>r[4]||(r[4]=[d("img",{src:K,alt:"Rewrite"},null,-1)])),_:1})),s.value?s.value?(i(),C(x,{key:3,onClick:n,style:{"background-color":"#5391FC"}},{default:g(()=>r[6]||(r[6]=[d("img",{src:X,alt:"Back"},null,-1)])),_:1})):L("",!0):(i(),C(x,{key:2,onClick:h,style:{"background-color":"#FC685E"}},{default:g(()=>r[5]||(r[5]=[d("img",{src:Q,alt:"Delete"},null,-1)])),_:1}))])],2))}}),de={class:"wrapper"},ue={class:"tasks-list"},ve={class:"content"},pe={class:"tasks-list"},he=k({__name:"TodoPage",setup(o){const e=f(!1),t=f(null),a=f(null),c=f("all");M(async()=>{try{e.value=!0;const n=await j();e.value=!1,t.value=n==null?void 0:n.data,a.value=n==null?void 0:n.info}catch{throw e.value=!1,new Error("Ошибка запроса с сервера "+Error)}});const s=async n=>{const v=await F(n);t.value=v==null?void 0:v.data,a.value=v==null?void 0:v.info},l=async n=>{e.value=!0,t.value=null,a.value=null,c.value=n,await s(n),e.value=!1},u=async n=>{await R(n),await s(c.value)},h=async(n,v)=>{await W(n,v),await s(c.value)},D=async n=>{await U(n),await s(c.value)};return(n,v)=>{var w,r,_;return i(),p("div",de,[d("div",ue,[E(J,{onCreateNewTodo:D}),E(q,{todoCount:{all:((w=a.value)==null?void 0:w.all)||0,completed:((r=a.value)==null?void 0:r.completed)||0,inWork:((_=a.value)==null?void 0:_.inWork)||0},onFilterChanged:l},null,8,["todoCount"]),d("div",ve,[d("div",pe,[(i(!0),p(H,null,S(t.value,m=>(i(),C(ie,{key:m.id,id:m.id,title:m.title,created:m.created,isDone:m.isDone,onDeleteTodo:u,onChangeTodoStatus:h,onChangeTodoTitle:h},null,8,["id","title","created","isDone"]))),128))])])])])}}});export{he as default};
