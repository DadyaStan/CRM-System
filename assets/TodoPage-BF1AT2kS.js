import{_ as F,o as i,f as p,g as N,h as B,d as x,r as _,i as A,v as M,e as c,c as b,w as C,t as $,n as E,u as w,b as y,j as V,k as H,F as S,l as j}from"./index-0XFU7NPw.js";const D="https://easydev.club/api/v1",W=async o=>{try{const e=await fetch(`${D}/todos?filter=${o}`),t=await e.json();if(!e.ok)throw new Error("Ошибка при загрузки профиля "+Error);return t}catch(e){throw console.error(e),new Error("Ошибка при загрузки профиля "+Error)}},U=async o=>{try{if(!(await fetch(`${D}/todos`,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({isDone:!1,title:o})})).ok)throw new Error("Ошибка при создании задачи "+Error)}catch(e){throw console.error(e),new Error("Ошибка при создании задачи "+Error)}},R=async(o,e)=>{try{const t=await fetch(`${D}/todos/${o}`,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Ошибка при изменении задачи "+Error);return await t.json()}catch(t){throw console.error(t),new Error("Ошибка при изменении задачи "+Error)}},Z=async o=>{try{if(!(await fetch(`${D}/todos/${o}`,{method:"DELETE",headers:{"Content-type":"application/json"}})).ok)throw new Error("Ошибка при удалении "+Error)}catch(e){throw console.error(e),new Error("Ошибка при удалении "+Error)}},z={},I={class:"med-btn"};function O(o,e){return i(),p("button",I,[N(o.$slots,"default",{},()=>[e[0]||(e[0]=B("Do"))])])}const P=F(z,[["render",O]]),J={class:"create-task-form"},Y=x({__name:"CreateTaskForm",emits:["createNewTodo"],setup(o,{emit:e}){const t=_(""),a=e,r=async()=>{t.value&&(await a("createNewTodo",t.value),t.value="")};return(s,l)=>(i(),p("div",J,[A(c("input",{"onUpdate:modelValue":l[0]||(l[0]=u=>t.value=u),class:"create-task-form__input",type:"text",placeholder:"Task To Be Done..."},null,512),[[M,t.value]]),b(P,{onClick:r},{default:C(()=>l[1]||(l[1]=[B(" Add ")])),_:1})]))}});var f=(o=>(o.all="all",o.inWork="inWork",o.completed="completed",o))(f||{});const q={class:"nav"},G=x({__name:"Nav",props:{todoFilters:{}},emits:["filterChanged"],setup(o,{emit:e}){const t=e,a=o,r=_(f.all),s=l=>{l!==r.value&&(r.value=l,t("filterChanged",l))};return(l,u)=>(i(),p("nav",q,[c("div",{class:E({nav__el:!0,nav__el_active:r.value===w(f).all}),onClick:u[0]||(u[0]=h=>s(w(f).all))}," Все ("+$(a.todoFilters.all?a.todoFilters.all:"-")+") ",3),c("div",{class:E({nav__el:!0,nav__el_active:r.value===w(f).inWork}),onClick:u[1]||(u[1]=h=>s(w(f).inWork))}," В работе ("+$(a.todoFilters.inWork?a.todoFilters.inWork:"-")+") ",3),c("div",{class:E({nav__el:!0,nav__el_active:r.value===w(f).completed}),onClick:u[2]||(u[2]=h=>s(w(f).completed))}," Сделано ("+$(a.todoFilters.completed?a.todoFilters.completed:"-")+") ",3)]))}}),K="data:image/svg+xml,%3csvg%20fill='%23ffffff'%20width='14px'%20height='14px'%20viewBox='0%200%2032%2032'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3c/defs%3e%3cg%20id='check'%3e%3cpath%20class='cls-1'%20d='M12.16,28a3,3,0,0,1-2.35-1.13L3.22,18.62a1,1,0,0,1,1.56-1.24l6.59,8.24A1,1,0,0,0,13,25.56L27.17,4.44a1,1,0,1,1,1.66,1.12L14.67,26.67A3,3,0,0,1,12.29,28Z'%20/%3e%3c/g%3e%3c/svg%3e",Q="data:image/svg+xml,%3csvg%20fill='%23ffffff'%20width='14px'%20height='14px'%20viewBox='-0.5%20-0.5%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%20preserveAspectRatio='xMinYMin'%20class='jam%20jam-write-f'%3e%3cpath%20d='M21.289.98l.59.59c.813.814.69%202.257-.277%203.223L9.435%2016.96l-3.942%201.442c-.495.182-.977-.054-1.075-.525a.928.928%200%200%201%20.045-.51l1.47-3.976L18.066%201.257c.967-.966%202.41-1.09%203.223-.276zM8.904%202.19a1%201%200%201%201%200%202h-4a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2v-4a1%201%200%200%201%202%200v4a4%204%200%200%201-4%204h-12a4%204%200%200%201-4-4v-12a4%204%200%200%201%204-4h4z'%20/%3e%3c/svg%3e",X="data:image/svg+xml,%3csvg%20fill='%23ffffff'%20width='14px'%20height='14px'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.755,20.283,4,8H20L18.245,20.283A2,2,0,0,1,16.265,22H7.735A2,2,0,0,1,5.755,20.283ZM21,4H16V3a1,1,0,0,0-1-1H9A1,1,0,0,0,8,3V4H3A1,1,0,0,0,3,6H21a1,1,0,0,0,0-2Z'%20/%3e%3c/svg%3e",ee="data:image/svg+xml,%3csvg%20width='14px'%20height='14px'%20viewBox='0%200%2015%2015'%20fill='%23fff'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4.85355%202.14645C5.04882%202.34171%205.04882%202.65829%204.85355%202.85355L3.70711%204H9C11.4853%204%2013.5%206.01472%2013.5%208.5C13.5%2010.9853%2011.4853%2013%209%2013H5C4.72386%2013%204.5%2012.7761%204.5%2012.5C4.5%2012.2239%204.72386%2012%205%2012H9C10.933%2012%2012.5%2010.433%2012.5%208.5C12.5%206.567%2010.933%205%209%205H3.70711L4.85355%206.14645C5.04882%206.34171%205.04882%206.65829%204.85355%206.85355C4.65829%207.04882%204.34171%207.04882%204.14645%206.85355L2.14645%204.85355C1.95118%204.65829%201.95118%204.34171%202.14645%204.14645L4.14645%202.14645C4.34171%201.95118%204.65829%201.95118%204.85355%202.14645Z'%20fill='%23fff'%20/%3e%3c/svg%3e",te={class:"checkbox-box"},oe=["checked"],ae=x({__name:"Checkbox",props:{modelValue:{type:Boolean}},setup(o){const e=o;return(t,a)=>(i(),p("div",te,[c("input",{type:"checkbox",checked:e.modelValue},null,8,oe)]))}}),se={},ne={class:"icon-btn"};function le(o,e){return i(),p("button",ne,[N(o.$slots,"default",{},()=>[e[0]||(e[0]=B(" UI "))])])}const T=F(se,[["render",le]]),re={class:"task-card__status-box"},ie={key:1,class:"task-card__content"},ce={class:"task-card__btn-box"},de=x({__name:"TaskCard",props:{id:{},title:{},created:{},isDone:{type:Boolean}},emits:["deleteTodo","changeTodoStatus","changeTodoTitle"],setup(o,{emit:e}){const t=o,a=e,r=_(t.isDone),s=_(!1),l=_(t.title),u=()=>{a("changeTodoStatus",t.id,{isDone:!t.isDone})},h=()=>{a("deleteTodo",t.id)},L=()=>{a("changeTodoTitle",t.id,{title:l.value}),s.value=!1},d=()=>{s.value=!1,l.value=t.title},v=g=>g?"task-card complete-task":"task-card";return(g,n)=>(i(),p("div",{class:E(v(t.isDone))},[c("div",re,[b(ae,{modelValue:r.value,"onUpdate:modelValue":n[0]||(n[0]=m=>r.value=m),onChange:u},null,8,["modelValue"]),s.value?A((i(),p("input",{key:0,"onUpdate:modelValue":n[1]||(n[1]=m=>l.value=m),class:"task-card__input task-card__content",type:"text"},null,512)),[[M,l.value]]):(i(),p("p",ie,$(t.title),1))]),c("div",ce,[s.value?(i(),y(T,{key:0,onClick:L,style:{"background-color":"#3ae43a"}},{default:C(()=>n[3]||(n[3]=[c("img",{src:K,alt:"Accept"},null,-1)])),_:1})):s.value?V("",!0):(i(),y(T,{key:1,onClick:n[2]||(n[2]=m=>s.value=!0),style:{"background-color":"#5391fc"}},{default:C(()=>n[4]||(n[4]=[c("img",{src:Q,alt:"Rewrite"},null,-1)])),_:1})),s.value?s.value?(i(),y(T,{key:3,onClick:d,style:{"background-color":"#5391fc"}},{default:C(()=>n[6]||(n[6]=[c("img",{src:ee,alt:"Back"},null,-1)])),_:1})):V("",!0):(i(),y(T,{key:2,onClick:h,style:{"background-color":"#fc685e"}},{default:C(()=>n[5]||(n[5]=[c("img",{src:X,alt:"Delete"},null,-1)])),_:1}))])],2))}}),ue={class:"wrapper"},ve={class:"tasks-list"},fe={class:"content"},pe={class:"tasks-list"},he=x({__name:"TodoPage",setup(o){const e=_(!1),t=_([]),a=_(null),r=_(f.all);H(async()=>{await s(f.all)});const s=async d=>{try{e.value=!0;const v=await W(d);v===void 0?alert("Произошла ошибка на стороне сервера"):(t.value=v==null?void 0:v.data,a.value=v==null?void 0:v.info)}catch{throw new Error("Ошибка запроса с сервера "+Error)}finally{e.value=!1}},l=async d=>{e.value=!0,t.value=[],a.value=null,r.value=d,await s(d),e.value=!1},u=async d=>{await Z(d),await s(r.value)},h=async(d,v)=>{await R(d,v),await s(r.value)},L=async d=>{await U(d),await s(r.value)};return(d,v)=>{var g,n,m;return i(),p("div",ue,[c("div",ve,[b(Y,{onCreateNewTodo:L}),b(G,{todoFilters:{all:((g=a.value)==null?void 0:g.all)||0,completed:((n=a.value)==null?void 0:n.completed)||0,inWork:((m=a.value)==null?void 0:m.inWork)||0},onFilterChanged:l},null,8,["todoFilters"]),c("div",fe,[c("div",pe,[(i(!0),p(S,null,j(t.value,k=>(i(),y(de,{key:k.id,id:k.id,title:k.title,created:k.created,isDone:k.isDone,onDeleteTodo:u,onChangeTodoStatus:h,onChangeTodoTitle:h},null,8,["id","title","created","isDone"]))),128))])])])])}}});export{he as default};
