import{_ as C,o as a,c as d,r as E,a as A,d as T,b as p,w as M,v as S,e as r,f as b,g as H,h as W,t as x,n as $,i as g,j as D,k as j,F,l as U}from"./index-C6WPsTgU.js";const y="https://easydev.club/api/v1",R=async()=>{try{const o=await fetch(`${y}/todos`),e=await o.json();if(!o.ok)throw new Error("Ошибка при загрузки всех задач");return e}catch(o){console.error(o)}},Z=async o=>{try{const e=await fetch(`${y}/todos?filter=${o}`),t=await e.json();if(!e.ok)throw new Error("Ошибка при загрузки всех задач");return t}catch(e){console.error(e)}},z=async o=>{try{if(!(await fetch(`${y}/todos`,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({isDone:!1,title:o})})).ok)throw new Error("Ошибка при создании задачи")}catch(e){console.error(e)}},N=async(o,e,t)=>{try{const n=await fetch(`${y}/todos/${o}`,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({isDone:e,title:t})});if(!n.ok)throw new Error("Ошибка при удалении");return await n.json()}catch(n){console.error(n)}},O=async o=>{try{if(!(await fetch(`${y}/todos/${o}`,{method:"DELETE",headers:{"Content-type":"application/json"}})).ok)throw new Error("Ошибка при удалении")}catch(e){console.error(e)}},J={},P={class:"med-btn"};function I(o,e){return a(),d("button",P,[E(o.$slots,"default",{},()=>[e[0]||(e[0]=A("Do"))])])}const Y=C(J,[["render",I]]),q={class:"create-task-form"},G=T({__name:"CreateTaskForm",emits:["createNewTodo"],setup(o,{emit:e}){const t=p(""),n=e,s=async()=>{t.value&&(await n("createNewTodo",t.value),t.value="")};return(c,i)=>(a(),d("div",q,[M(r("input",{"onUpdate:modelValue":i[0]||(i[0]=u=>t.value=u),class:"create-task-form__input",type:"text",placeholder:"Task To Be Done..."},null,512),[[S,t.value]]),b(Y,{onClick:s},{default:H(()=>i[1]||(i[1]=[A(" Add ")])),_:1})]))}}),K={class:"nav"},Q=T({__name:"Nav",props:{all:{},completed:{},inWork:{}},emits:["filterChanged"],setup(o,{emit:e}){const t=e,n=o,s=p("all"),c=W(()=>({all:s.value==="all"?"nav__el nav__el_active":"nav__el",inWork:s.value==="inWork"?"nav__el nav__el_active":"nav__el",completed:s.value==="completed"?"nav__el nav__el_active":"nav__el"})),i=u=>{u!==s.value&&(s.value=u,t("filterChanged",u))};return(u,_)=>(a(),d("nav",K,[r("div",{class:$(c.value.all),onClick:_[0]||(_[0]=w=>i("all"))}," Все ("+x(n.all?n.all:"-")+") ",3),r("div",{class:$(c.value.inWork),onClick:_[1]||(_[1]=w=>i("inWork"))}," В работе ("+x(n.inWork?n.inWork:"-")+") ",3),r("div",{class:$(c.value.completed),onClick:_[2]||(_[2]=w=>i("completed"))}," Сделано ("+x(n.completed?n.completed:"-")+") ",3)]))}}),X={class:"checkbox-box"},ee=["checked"],te=T({__name:"Checkbox",props:{modelValue:{type:Boolean}},setup(o){return(e,t)=>(a(),d("div",X,[r("input",{type:"checkbox",checked:e.modelValue},null,8,ee)]))}}),oe={},ne={class:"chng-btn"};function ae(o,e){return a(),d("button",ne,e[0]||(e[0]=[r("svg",{fill:"#ffffff",width:"14px",height:"14px",viewBox:"-0.5 -0.5 24 24",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMinYMin",class:"jam jam-write-f"},[r("path",{d:"M21.289.98l.59.59c.813.814.69 2.257-.277 3.223L9.435 16.96l-3.942 1.442c-.495.182-.977-.054-1.075-.525a.928.928 0 0 1 .045-.51l1.47-3.976L18.066 1.257c.967-.966 2.41-1.09 3.223-.276zM8.904 2.19a1 1 0 1 1 0 2h-4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-4a1 1 0 0 1 2 0v4a4 4 0 0 1-4 4h-12a4 4 0 0 1-4-4v-12a4 4 0 0 1 4-4h4z"})],-1)]))}const se=C(oe,[["render",ae]]),le={},re={class:"del-btn"};function ce(o,e){return a(),d("button",re,e[0]||(e[0]=[r("svg",{fill:"#ffffff",width:"14px",height:"14px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M5.755,20.283,4,8H20L18.245,20.283A2,2,0,0,1,16.265,22H7.735A2,2,0,0,1,5.755,20.283ZM21,4H16V3a1,1,0,0,0-1-1H9A1,1,0,0,0,8,3V4H3A1,1,0,0,0,3,6H21a1,1,0,0,0,0-2Z"})],-1)]))}const ie=C(le,[["render",ce]]),de={},ue={class:"reset-btn"};function _e(o,e){return a(),d("button",ue,e[0]||(e[0]=[r("svg",{width:"14px",height:"14px",viewBox:"0 0 15 15",fill:"#fff",xmlns:"http://www.w3.org/2000/svg"},[r("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.85355 2.14645C5.04882 2.34171 5.04882 2.65829 4.85355 2.85355L3.70711 4H9C11.4853 4 13.5 6.01472 13.5 8.5C13.5 10.9853 11.4853 13 9 13H5C4.72386 13 4.5 12.7761 4.5 12.5C4.5 12.2239 4.72386 12 5 12H9C10.933 12 12.5 10.433 12.5 8.5C12.5 6.567 10.933 5 9 5H3.70711L4.85355 6.14645C5.04882 6.34171 5.04882 6.65829 4.85355 6.85355C4.65829 7.04882 4.34171 7.04882 4.14645 6.85355L2.14645 4.85355C1.95118 4.65829 1.95118 4.34171 2.14645 4.14645L4.14645 2.14645C4.34171 1.95118 4.65829 1.95118 4.85355 2.14645Z",fill:"#fff"})],-1)]))}const ve=C(de,[["render",_e]]),he={},pe={class:"accept-btn"};function fe(o,e){return a(),d("button",pe,e[0]||(e[0]=[r("svg",{fill:"#ffffff",width:"14px",height:"14px",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},[r("defs"),r("g",{id:"check"},[r("path",{class:"cls-1",d:"M12.16,28a3,3,0,0,1-2.35-1.13L3.22,18.62a1,1,0,0,1,1.56-1.24l6.59,8.24A1,1,0,0,0,13,25.56L27.17,4.44a1,1,0,1,1,1.66,1.12L14.67,26.67A3,3,0,0,1,12.29,28Z"})])],-1)]))}const me=C(he,[["render",fe]]),we={class:"task-card__status-box"},ke={key:1,class:"task-card__content"},ge={class:"task-card__btn-box"},Ce=T({__name:"TaskCard",props:{id:{},title:{},created:{},isDone:{type:Boolean}},emits:["deleteTodo","changeTodoStatus","changeTodoTitle"],setup(o,{emit:e}){const t=o,n=e,s=p(t.isDone),c=p(!1),i=p(t.title),u=()=>{n("changeTodoStatus",t.id,!t.isDone)},_=()=>{n("deleteTodo",t.id)},w=()=>{n("changeTodoTitle",t.id,t.isDone,i.value),c.value=!1},l=()=>{c.value=!1,i.value=t.title},h=f=>f?"task-card complete-task":"task-card";return(f,v)=>(a(),d("div",{class:$(h(t.isDone))},[r("div",we,[b(te,{modelValue:s.value,"onUpdate:modelValue":v[0]||(v[0]=m=>s.value=m),onChange:u},null,8,["modelValue"]),c.value?M((a(),d("input",{key:0,"onUpdate:modelValue":v[1]||(v[1]=m=>i.value=m),class:"task-card__input task-card__content",type:"text"},null,512)),[[S,i.value]]):(a(),d("p",ke,x(t.title),1))]),r("div",ge,[c.value?(a(),g(me,{key:0,onClick:w})):c.value?D("",!0):(a(),g(se,{key:1,onClick:v[2]||(v[2]=m=>c.value=!0)})),c.value?c.value?(a(),g(ve,{key:3,onClick:l})):D("",!0):(a(),g(ie,{key:2,onClick:_}))])],2))}}),Te={class:"tasks-list"},ye={key:0,class:"tasks-list__loading"},xe={key:1,class:"tasks-list"},be=T({__name:"TodoView",setup(o){const e=p(!1),t=p(null),n=p("all");j(async()=>{const l=await R();e.value=!0,t.value=l});const s=async l=>{const h=await Z(l);t.value=h},c=async l=>{t.value=null,n.value=l,await s(l)},i=async l=>{await O(l),await s(n.value)},u=async(l,h)=>{await N(l,h),await s(n.value)},_=async(l,h,f)=>{await N(l,h,f),await s(n.value)},w=async l=>{await z(l),await s(n.value)};return(l,h)=>{var f,v,m,B,L,V;return a(),d("div",Te,[b(G,{onCreateNewTodo:w}),b(Q,{all:((v=(f=t.value)==null?void 0:f.info)==null?void 0:v.all)||0,completed:((B=(m=t.value)==null?void 0:m.info)==null?void 0:B.completed)||0,inWork:((V=(L=t.value)==null?void 0:L.info)==null?void 0:V.inWork)||0,onFilterChanged:c},null,8,["all","completed","inWork"]),e.value===null?(a(),d("div",ye," Loading... ")):D("",!0),t.value?(a(),d("div",xe,[(a(!0),d(F,null,U(t.value.data,k=>(a(),g(Ce,{key:k.id,id:k.id,title:k.title,created:k.created,isDone:k.isDone,onDeleteTodo:i,onChangeTodoStatus:u,onChangeTodoTitle:_},null,8,["id","title","created","isDone"]))),128))])):D("",!0)])}}});export{be as default};
